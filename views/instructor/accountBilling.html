<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment and Plan Management</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .active-tab {
            background-color: rgb(126 34 206);
            color: white;
            border-radius: 10px;
        }

        .tab:hover {
            background-color: #805ad5;
            color: white;
            border-radius: 10px;
        }

        .header {
            background-color: rgb(126 34 206);
        }

        .header h1 {
            color: white;
        }

        .footer {
            background-color: rgb(126 34 206);
            color: white;
            padding: 1rem;
            text-align: center;
        }

        .footer a {
            color: #ddd6fe;
        }

        .footer a:hover {
            color: white;
        }
    </style>
</head>

<body class="bg-gray-100 font-sans">
    <!-- Header -->
    <header>
        <nav class="bg-white border-b shadow">
          <div id="topNav" class="container mx-auto flex justify-between items-center py-4 px-2 lg:px-8">
              <img
                id="logo"
                src="../../static/img/headerlogo.png"
                alt="IT Learning Logo"
                class="w-35 h-12"
              />
      
            <button
              class="lg:hidden flex items-center px-3 py-2 border rounded text-gray-500 border-gray-400"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarTogglerDemo01"
              aria-controls="navbarTogglerDemo01"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <svg class="fill-current h-5 w-5" viewBox="0 0 20 20"><path d="M0 3h20v2H0V3zm0 5h20v2H0V8zm0 5h20v2H0v-2z"/></svg>
            </button>
      
            <div class="hidden lg:flex space-x-8 items-center">
              <ul class="flex space-x-6 text-gray-700 font-semibold">
                <li><a class="hover:text-blue-500" href="/">Home</a></li>
                <li><a class="hover:text-blue-500" href="aboutUs">About Us</a></li>
                <li class="relative group">
                  <a class="hover:text-blue-500 flex items-center cursor-pointer">
                    Browse
                    <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                  </a>
                  <ul class="absolute hidden group-hover:block bg-white shadow-lg rounded mt-1 text-sm">
                    <li><a class="block px-4 py-2 hover:bg-gray-200" href="#">Browse Courses by Category</a></li>
                    <li><a class="block px-4 py-2 hover:bg-gray-200" href="#">Browse Courses by Name</a></li>
                    <li class="border-t"><a class="block px-4 py-2 hover:bg-gray-200" href="#">Browse Instructors</a></li>
                  </ul>
                </li>
                <li><a class="hover:text-blue-500" href="pricing">Pricing</a></li>
                <li><a class="hover:text-blue-500" href="/">My Account</a></li>
                <li><a class="hover:text-blue-500" href="faq">FAQs</a></li>
                <li><a class="hover:text-blue-500" href="contactPage">Contact</a></li>
              </ul>
      
              <!-- <form class="flex items-center space-x-2">
                <input
                  class="form-input border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring focus:border-blue-300"
                  id="nav-search-input"
                  type="search"
                  placeholder="Type Course Names"
                  aria-label="Search"
                />
                <button class="btn bg-green-500 text-white rounded-lg px-4 py-2 hover:bg-green-600" id="nav-button" type="submit">
                  Search
                </button>
              </form> -->
            </div>
          </div>
      
          <div class="lg:hidden">
            <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
              <ul class="flex flex-col space-y-4 p-4">
                <li><a class="hover:text-blue-500" href="/">Home</a></li>
                <li><a class="hover:text-blue-500" href="aboutUs">About Us</a></li>
                <li class="relative group">
                  <a class="hover:text-blue-500 flex items-center cursor-pointer">
                    Browse
                    <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                  </a>
                  <ul class="mt-2 space-y-2">
                    <li><a class="block px-4 py-2 hover:bg-gray-200" href="#">Browse Courses by Category</a></li>
                    <li><a class="block px-4 py-2 hover:bg-gray-200" href="#">Browse Courses by Name</a></li>
                    <li class="border-t"><a class="block px-4 py-2 hover:bg-gray-200" href="#">Browse Instructors</a></li>
                  </ul>
                </li>
                <li><a class="hover:text-blue-500" href="pricing">Pricing</a></li>
                <li><a class="hover:text-blue-500" href="/">My Account</a></li>
                <li><a class="hover:text-blue-500" href="faq">FAQs</a></li>
                <li><a class="hover:text-blue-500" href="contactPage">Contact</a></li>
              </ul>
              <!-- <form class="flex flex-col space-y-4 p-4">
                <input
                  class="form-input border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring focus:border-blue-300"
                  id="nav-search-input"
                  type="search"
                  placeholder="Type Course Names"
                  aria-label="Search"
                />
                <button class="btn bg-green-500 text-white rounded-lg px-4 py-2 hover:bg-green-600" id="nav-button" type="submit">
                  Search
                </button>
              </form> -->
            </div>
          </div>
        </nav>
      </header> 

    <div class="container mx-auto my-8">
        <div class="flex">
            <!-- Sidebar -->
            <div class="w-1/4 bg-white p-6 rounded-lg shadow-lg">
                <ul>
                    <li class="py-2"><a href="#" class="text-gray-800 font-semibold hover:text-purple-600">Account</a></li>
                    <li class="py-2"><a href="#" class="text-gray-800 font-semibold hover:text-purple-600">Goal Settings</a></li>
                    <li class="py-2"><a href="#" class="text-gray-800 font-semibold hover:text-purple-600">Mail Settings</a></li>
                    <li class="py-2"><a href="#" class="text-purple-600 font-semibold">Payment and Plan</a></li>
                    <li class="py-2"><a href="#" class="text-gray-800 font-semibold hover:text-purple-600">Linked Accounts</a></li>
                    <li class="py-2"><a href="#" class="text-gray-800 font-semibold hover:text-purple-600">Delete Account</a></li>
                </ul>
            </div>
            <!-- Main Content -->
            <div class="w-3/4 bg-white p-6 ml-4 rounded-lg shadow-lg">
                <div class="border-b mb-6">
                    <ul class="flex cursor-pointer space-x-4" id="tabs">
                        <li id="tab-purchase-details" class="px-6 py-2 tab active-tab">Purchase details</li>
                        <li id="tab-billing-history" class="px-6 py-2 tab text-gray-600">Billing history</li>
                    </ul>
                </div>
                <!-- Purchase Details Section -->
                <div id="plan-details" class="tab-content">
                  <!-- Plan details will be injected here -->
                  <p>Loading plan details...</p>
                </div>
                <!-- Billing History Section -->
                <div id="billing-history" class="tab-content hidden">
                    <h2 class="text-xl font-semibold mb-4">Billing history</h2>
                    <table class="table-auto w-full text-left">
                        <thead>
                            <tr class="text-gray-700">
                                <th class="px-4 py-2">Date</th>
                                <th class="px-4 py-2">Item</th>
                                <th class="px-4 py-2">Status</th>
                                <th class="px-4 py-2">Total</th>
                                <th class="px-4 py-2">Details</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="border px-4 py-2">12/29/23</td>
                                <td class="border px-4 py-2">Pro - 12 Months</td>
                                <td class="border px-4 py-2">Paid</td>
                                <td class="border px-4 py-2">$59.99</td>
                                <td class="border px-4 py-2 text-blue-600 hover:underline"><a href="#">View</a></td>
                            </tr>
                            <tr>
                                <td class="border px-4 py-2">12/19/23</td>
                                <td class="border px-4 py-2">Pro - 12 Months</td>
                                <td class="border px-4 py-2">Paid</td>
                                <td class="border px-4 py-2">$0.00</td>
                                <td class="border px-4 py-2 text-blue-600 hover:underline"><a href="#">View</a></td>
                            </tr>
                            <tr>
                                <td class="border px-4 py-2">04/18/23</td>
                                <td class="border px-4 py-2">Pro - Monthly</td>
                                <td class="border px-4 py-2">Credited</td>
                                <td class="border px-4 py-2">-$24.99</td>
                                <td class="border px-4 py-2 text-blue-600 hover:underline"><a href="#">View</a></td>
                            </tr>
                            <tr>
                                <td class="border px-4 py-2">04/18/23</td>
                                <td class="border px-4 py-2">Pro - Monthly</td>
                                <td class="border px-4 py-2">Failed</td>
                                <td class="border px-4 py-2">$24.99</td>
                                <td class="border px-4 py-2 text-blue-600 hover:underline"><a href="#">View</a></td>
                            </tr>
                            <!-- Add more rows as needed -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div id="footer" class="bg-gray-800 text-white py-10">
        <div class="container mx-auto px-4">
            <!-- Top Section: Companies & Slogan -->
            <div class="flex flex-col lg:flex-row justify-between items-center mb-8">
                <h4 class="text-lg font-semibold text-center lg:text-left mb-6 lg:mb-0">
                    Top companies choose ITLearning to build in-demand career skills.
                </h4>
                <div class="flex justify-center lg:justify-end space-x-6">
                    <img src="../../static/img/company.png" alt="Volkswagen" class="h-16 w-16" />
                    <img src="../../static/img/company2.svg" alt="Box" class="h-16 w-16" />
                    <img src="../../static/img/company1.png" alt="NetApp" class="h-16 w-16" />
                </div>
            </div>

            <!-- Links Section -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 text-center sm:text-left mb-8">
                <div>
                    <p><a href="#" class="hover:underline">Teach on ITLearning</a></p>
                    <p><a href="#" class="hover:underline">About us</a></p>
                    <p><a href="#" class="hover:underline">Contact us</a></p>
                </div>
                <div>
                    <p><a href="#" class="hover:underline">Help and Support</a></p>
                    <p><a href="#" class="hover:underline">Affiliate</a></p>
                    <p><a href="#" class="hover:underline">Investors</a></p>
                </div>
                <div>
                    <p><a href="#" class="hover:underline">Terms & Services</a></p>
                    <p><a href="#" class="hover:underline">Privacy Policy</a></p>
                    <p><a href="#" class="hover:underline">FAQs</a></p>
                </div>
            </div>

            <!-- Bottom Section: Logo and Copyright -->
            <div class="flex flex-col sm:flex-row justify-between items-center border-t border-gray-700 pt-6">
                <div class="flex items-center space-x-4 mb-4 sm:mb-0">
                    <img src="../../static/img/Logo.png" alt="Logo" class="h-10 w-10" />
                    <span>&copy; 2024 ITLearning. All Rights Reserved.</span>
                </div>
                <div>
                    <a href="#" class="hover:underline text-gray-400">Privacy Policy</a>
                    <span class="mx-2">|</span>
                    <a href="#" class="hover:underline text-gray-400">Terms of Use</a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#tabs li').click(function() {
                var tab_id = $(this).attr('id');

                $('#tabs li').removeClass('active-tab');
                $('.tab-content').addClass('hidden');

                $(this).addClass('active-tab');
                $('#' + tab_id.replace('tab-', '')).removeClass('hidden');
            });
        });

        function fetchMembershipDetails() {
            const apiUrl = 'http://localhost:3000/memberships/instructor/66e00d8d87e60487ea39c25a';
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    const planDetails = data[0];  // Assuming the first plan is the active one
                    const planDetailsElement = document.getElementById('plan-details');
                    
                    // Build the HTML for the plan details
                    const htmlContent = `
                      <h2 class="text-xl font-semibold mb-4">Current plan</h2>
                      <p class="mb-4">${planDetails.planName} - Instructor</p>
                      <h3 class="text-lg font-semibold mb-2">Active subscriptions</h3>
                      <p class="mb-4">Billed ${planDetails.planType}</p>
                      <p class="mb-4"><strong>Commission Fee:</strong> ${planDetails.commissionFee * 100}%</p>
                      <p class="mb-4"><strong>Price:</strong> $${planDetails.price}</p>
                      <p class="mb-4">Last charged ${new Date(planDetails.startDate).toLocaleDateString()}</p>
                      <p class="mb-4">Estimated payment scheduled for ${new Date(planDetails.endDate).toLocaleDateString()}</p>
                      <h3 class="text-lg font-semibold mb-2">Payment method</h3>
                      <p class="mb-4">${planDetails.paymentMethod} •••• ${planDetails.cardNumber.slice(-4)} <a href="#" class="text-blue-600 hover:underline">Update</a></p>
                      <h3 class="text-lg font-semibold mb-2">Need a break?</h3>
                      <p class="text-blue-600"><a href="#" class="hover:underline">I want to end my subscription</a></p>
                    `;
                    
                    // Inject the HTML into the DOM
                    planDetailsElement.innerHTML = htmlContent;
                })
                .catch(error => {
                    console.error('Error fetching membership details:', error);
                });
        }

        // Call the function when the page loads
        window.onload = fetchMembershipDetails;
    </script>
</body>

</html>